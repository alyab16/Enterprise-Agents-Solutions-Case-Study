%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#cce5ff', 'primaryBorderColor': '#2c5282' }}}%%
flowchart TD
    START(("üöÄ Start<br/>Onboarding"))
    
    CHECK_API{"API Errors<br/>Count > 0?"}
    CHECK_VIOL{"Violations<br/>Count > 0?"}
    CHECK_WARN{"Warnings<br/>Count > 0?"}
    
    BLOCK["üö´ BLOCK<br/>Cannot Proceed"]
    ESCALATE["‚ö†Ô∏è ESCALATE<br/>Human Review Required"]
    PROCEED["‚úÖ PROCEED<br/>Auto-Provision"]
    
    PROV["Provision Tenant<br/>Create 14 Onboarding Tasks"]
    NOTIFY_BLOCK["Notify CS Team<br/>Send Block Alert"]
    NOTIFY_ESC["Notify CS Team<br/>Request Review"]
    NOTIFY_SUCCESS["Notify CS Team<br/>Send Welcome Email"]
    
    DONE(("‚úì Complete"))

    START --> CHECK_API
    
    CHECK_API -->|"Yes"| BLOCK
    CHECK_API -->|"No"| CHECK_VIOL
    
    CHECK_VIOL -->|"Yes"| BLOCK
    CHECK_VIOL -->|"No"| CHECK_WARN
    
    CHECK_WARN -->|"Yes"| ESCALATE
    CHECK_WARN -->|"No"| PROCEED
    
    BLOCK --> NOTIFY_BLOCK
    ESCALATE --> NOTIFY_ESC
    PROCEED --> PROV
    PROV --> NOTIFY_SUCCESS
    
    NOTIFY_BLOCK --> DONE
    NOTIFY_ESC --> DONE
    NOTIFY_SUCCESS --> DONE

    style BLOCK fill:#ffcccc,stroke:#cc0000,stroke-width:2px
    style ESCALATE fill:#fff3cd,stroke:#cc9900,stroke-width:2px
    style PROCEED fill:#d4edda,stroke:#28a745,stroke-width:2px
    style START fill:#2c5282,stroke:#1a365d,color:#fff
    style DONE fill:#2c5282,stroke:#1a365d,color:#fff
